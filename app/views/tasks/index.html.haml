%h1.text-center.mt-3 任務列表
.search.d-flex.justify-content-between.mt-3
  = form_with url: tasks_path, scope: 'search', remote: false, method: 'get', class: 'form-inline' do |f|
    = f.select(:statuses, options_for_statuses_index, {prompt: '選擇狀態'}, class: 'custom-select mr-1')
    = f.select(:sort, options_for_sort, {prompt: '排列順序'}, class: 'custom-select mr-1')
    = f.search_field(:title, onsearch: true, class: 'form-control mr-1')
    = f.submit(t('.submit'), class: 'btn btn-outline-secondary')
  = link_to t('.create_task'), new_task_path, class: 'btn btn-outline-secondary'
%table.table.table-striped.text-center.mt-1
  %thead.thead-dark
    %tr
      %th 優先程度
      %th 狀態
      %th 任務
      %th 開始時間
      %th 結束時間
      %th{colspan: 1} 
  %tbody 
    - @tasks.each do |task|
      %tr 
        %td 
          = t("tasks.model.priorities.#{task.priority}")
        %td 
          = t("tasks.model.statuses.#{task.status}")
        %td 
          = link_to task.title, task_path(task), class: 'text-decoration-none'
        %td 
          = time_format(task.start_time)
        %td 
          = time_format(task.end_time)
        %td 
          = link_to t('.destroy_task'), task_path(task), method: 'delete', data: {confirm: t('.destroy_check_text')}, class: 'btn btn-danger btn-sm'
= paginate(@tasks)